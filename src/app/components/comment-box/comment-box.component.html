<div class="comment-box-container">
  <div *ngFor="let comment of comments">
    <div class="comment"
         [style.marginLeft.px]="nestingLevel * 30"
         [style.borderLeft]=" '4px solid' + getRandomPastelColor()">
      <p><strong>{{ comment.user.username }}</strong>: {{ comment.content }}</p>
      <div class="comment-details">
        <div class="comment-timestamp">{{ comment.createdAt | date:"MMM dd, yyyy '@' hh:mm a" }}</div>
        <img [src]="comment.user.profilePictureUrl || '../../assets/images/default-avatar.png'"
             alt="Avatar" class="avatar">
      </div>
      <div class="reply-button-container">
        <div class="reply-text">Reply</div>
        <div class="reply-icon-container">
          <svg class="reply-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
            <path
              d="M205 34.8c11.5 5.1 19 16.6 19 29.2l0 64 112 0c97.2 0 176 78.8 176 176c0 113.3-81.5 163.9-100.2 174.1c-2.5 1.4-5.3 1.9-8.1 1.9c-10.9 0-19.7-8.9-19.7-19.7c0-7.5 4.3-14.4 9.8-19.5c9.4-8.8 22.2-26.4 22.2-56.7c0-53-43-96-96-96l-96 0 0 64c0 12.6-7.4 24.1-19 29.2s-25 3-34.4-5.4l-160-144C3.9 225.7 0 217.1 0 208s3.9-17.7 10.6-23.8l160-144c9.4-8.5 22.9-10.6 34.4-5.4z"/>
          </svg>
        </div>
      </div>
    </div>

    <div class="reply-container" *ngIf="comment.replies && comment.replies.length > 0">
      <app-comment-box [comments]="comment.replies"
                       [nestingLevel]="nestingLevel + 1">
      </app-comment-box>
    </div>
  </div>
</div>
